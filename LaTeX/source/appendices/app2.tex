\chapter{Another way including listing file}


This is a sample Appendix illustrating how source code code be added
in an appendix.

\section{Standard Hello World (hello\_world.c)}

\begin{figure*}[!ht]
\lstset{language=c++, commentstyle=\textit,
caption=\emph{point\_doubling} SW MoC, label=l2} {\footnotesize
\begin{lstlisting}[frame=trbl]{}
void point_doubling (PRIME_DOMAIN_PARAMETER
    domain, POINT Q, POINT* R) {
    int i = 0;

    FIELDP two   = {0x00000000, ..., 0x00000002};
    FIELDP three = {0x00000000, ..., 0x00000003};
    FIELDP s={0}, temp1={0}, temp2 = {0},
        temp3 = {0}, temp4 = {0};

    //s = (3*Qx^2 + a) / (2Qy) mod p
    mod_mul(Q.x, Q.x, domain.p, &temp1);
    mod_mul(three, temp1, domain.p, &temp2);
    mod_add(temp2, domain.a, domain.p, &temp3);
    mod_mul(two, Q.y, domain.p, &temp4);
    mod_div(temp3, temp4, domain.p, &s);

    //Rx = s^2 - 2Qx mod p
    mod_mul(s, s, domain.p, &temp1);
    mod_mul(two, Q.x, domain.p, &temp2);
    mod_sub(temp1, temp2, domain.p, &R->x);

    //Ry = -Qy + s(Qx - Rx) mod p
    mod_sub(Q.x, R->x, domain.p, &temp1);
    mod_mul(s, temp1, domain.p, &temp2);
    mod_sub(temp2, Q.y, domain.p, &R->y);
}
\end{lstlisting}}
\end{figure*}

\section{Another way}
\begin{figure*}[!ht]
\lstset{ %
caption=A Matlab code, %the caption
label=l2,                       % the label
language=Matlab,                % choose the language of the code
basicstyle=\footnotesize,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=2,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
%backgroundcolor=\color{cyan},   % choose the background color. You must add \usepackage{color}
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,                   % adds a frame around the code
tabsize=2,                      % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)}          % if you want to add a comment within your code
}

\lstinputlisting{source/appendices/code.m}
\end{figure*}
